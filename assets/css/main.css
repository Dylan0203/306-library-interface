@import "tailwindcss";

/* ============================================
   Base Styles
   ============================================ */
@layer base {
  body {
    @apply bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-w-[320px];
    font-family:
      system-ui,
      -apple-system,
      BlinkMacSystemFont,
      "Segoe UI",
      Roboto,
      "Helvetica Neue",
      Arial,
      sans-serif;
    line-height: 1.6;
  }

  h1 {
    @apply text-3xl md:text-4xl font-bold mb-6 text-gray-900 dark:text-white;
  }

  h2 {
    @apply text-2xl md:text-3xl font-semibold mb-4 text-gray-800 dark:text-gray-100;
  }
}

/* ============================================
   Component Styles (Legacy - to be migrated)
   ============================================ */
@layer components {
  /* Skip to main content link for accessibility */
  .skip-link {
    @apply absolute -top-10 left-0 bg-blue-600 text-white px-4 py-2 no-underline z-[9999];
  }

  .skip-link:focus {
    @apply top-0;
  }

  /* Main Content */
  .main-content {
    @apply p-4 max-w-7xl mx-auto;
  }

  .page-header {
    @apply flex justify-between items-center mb-6;
  }

  /* Loading spinner */
  .spinner {
    @apply border-4 border-gray-200 dark:border-gray-700 border-t-blue-600 rounded-full w-10 h-10 animate-spin mx-auto my-8;
  }

  /* Skeleton loaders */
  .skeleton {
    @apply bg-gradient-to-r from-gray-100 via-gray-200 to-gray-100 dark:from-gray-800 dark:via-gray-700 dark:to-gray-800 rounded-lg;
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }

  @keyframes shimmer {
    0% {
      background-position: 200% 0;
    }
    100% {
      background-position: -200% 0;
    }
  }

  .skeleton-card {
    @apply bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm;
  }

  .skeleton-title {
    @apply h-6 w-4/5 mb-2;
  }

  .skeleton-text {
    @apply h-4 w-3/5 mb-2;
  }

  .skeleton-button {
    @apply h-10 w-full mt-4;
  }

  /* Book Grid */
  .book-list-container {
    @apply mt-4;
  }

  .book-grid {
    @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4;
  }

  /* Book Card */
  .book-card {
    @apply bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm hover:shadow-md transition-all duration-200 flex flex-col justify-between relative hover:-translate-y-0.5;
  }

  .book-header {
    @apply flex justify-end mb-2;
  }

  .btn-qrcode {
    @apply bg-transparent border border-gray-300 dark:border-gray-600 rounded-lg px-2 py-1 cursor-pointer text-xl leading-none transition-all duration-200 hover:bg-gray-100 dark:hover:bg-gray-700 hover:border-blue-600 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2;
  }

  .book-content {
    @apply flex-grow;
  }

  .book-title {
    @apply text-lg font-semibold text-gray-900 dark:text-white mb-2 line-clamp-2 break-words;
  }

  .book-number {
    @apply text-gray-500 dark:text-gray-400 text-xs mb-2 font-mono;
  }

  .book-author {
    @apply text-gray-600 dark:text-gray-300 text-sm mb-2 truncate break-words;
  }

  .borrower-name {
    @apply text-blue-600 dark:text-blue-400 text-sm mt-3 pt-3 border-t border-gray-200 dark:border-gray-700 truncate break-words;
  }

  .borrowed-info {
    @apply mt-3 pt-3 border-t border-gray-200 dark:border-gray-700;
  }

  .borrowed-date {
    @apply text-gray-500 dark:text-gray-400 text-xs my-1;
  }

  .due-date {
    @apply text-blue-600 dark:text-blue-400 text-xs font-semibold my-1;
  }

  .due-date.overdue {
    @apply text-red-600 dark:text-red-400 font-bold;
  }

  .book-actions {
    @apply mt-4;
  }

  /* Empty State */
  .empty-state {
    @apply text-center py-12 bg-white dark:bg-gray-800 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-700;
  }

  .empty-state p {
    @apply text-lg text-gray-600 dark:text-gray-300;
  }

  /* Error Message */
  .error-message {
    @apply bg-red-50 dark:bg-red-900/20 border border-red-400 dark:border-red-600 rounded-lg p-4 mb-4 text-red-800 dark:text-red-200;
  }

  /* Buttons */
  .btn {
    @apply inline-block px-5 py-2.5 text-sm font-medium text-center no-underline border-0 rounded-lg cursor-pointer transition-all duration-200 w-full focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-primary {
    @apply bg-blue-600 text-white hover:bg-blue-700 hover:shadow-md;
  }

  .btn-secondary {
    @apply bg-gray-500 text-white hover:bg-gray-600;
  }

  /* Modal Overlay */
  .modal-overlay,
  .modal-backdrop {
    @apply fixed inset-0 bg-black/50 flex items-center justify-center z-[1000] p-4;
  }

  .modal-content {
    @apply bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-lg w-full max-h-[90vh] overflow-y-auto;
  }

  .modal-header {
    @apply flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700;
  }

  .modal-header h2 {
    @apply m-0 text-2xl;
  }

  .modal-close,
  .btn-close {
    @apply bg-transparent border-0 text-2xl leading-none text-gray-500 dark:text-gray-400 cursor-pointer p-0 w-8 h-8 flex items-center justify-center rounded transition-all duration-200 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2;
  }

  .modal-body {
    @apply p-4;
  }

  .modal-footer {
    @apply p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end;
  }

  .modal-footer .btn {
    @apply w-auto min-w-[100px];
  }

  /* Book Info in Modal */
  .book-info {
    @apply mb-6 pb-4 border-b border-gray-200 dark:border-gray-700;
  }

  .book-info h3 {
    @apply m-0 mb-1 text-xl;
  }

  /* Form Styles */
  .form-group {
    @apply mb-4;
  }

  .form-group label {
    @apply block mb-2 font-medium text-gray-900 dark:text-white;
  }

  .form-input {
    @apply w-full px-3 py-2 text-base border border-gray-300 dark:border-gray-600 rounded-lg transition-colors bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-blue-600 focus:ring-offset-2;
  }

  .form-error {
    @apply text-red-600 dark:text-red-400 text-sm mt-1;
  }

  .form-actions {
    @apply flex gap-3 mt-6;
  }

  .form-actions .btn {
    @apply flex-1;
  }

  /* Toast Notifications */
  .toast {
    @apply fixed top-4 right-4 min-w-[300px] max-w-lg px-6 py-4 rounded-lg shadow-lg z-[2000] flex items-center justify-between gap-4;
    animation: slideIn 0.3s ease;
  }

  @keyframes slideIn {
    from {
      transform: translateX(120%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  .toast-success {
    @apply bg-green-600 text-white;
  }

  .toast-error {
    @apply bg-red-600 text-white;
  }

  .toast-message {
    @apply m-0 flex-1 font-medium;
  }

  .toast-close {
    @apply bg-transparent border-0 text-white text-2xl leading-none cursor-pointer p-0 w-6 h-6 flex items-center justify-center rounded transition-opacity duration-200 hover:opacity-80;
  }

  /* QR Code Modal */
  .qrcode-modal {
    @apply max-w-md;
  }

  .modal-title {
    @apply text-xl font-semibold m-0;
  }

  .qrcode-info {
    @apply mb-4 text-center;
  }

  .qrcode-book-name {
    @apply text-lg font-semibold m-0 mb-1 text-gray-900 dark:text-white;
  }

  .qrcode-book-number {
    @apply text-sm text-gray-500 dark:text-gray-400 m-0 font-mono;
  }

  .qrcode-container {
    @apply flex justify-center items-center p-4 bg-gray-100 dark:bg-gray-700 rounded-lg min-h-[280px];
  }

  .qrcode-image {
    @apply max-w-full h-auto rounded-lg;
  }

  .qrcode-loading {
    @apply text-gray-500 dark:text-gray-400 text-center;
  }

  .qrcode-hint {
    @apply text-center text-gray-500 dark:text-gray-400 text-sm mt-4 mb-0;
  }

  /* Modal Transitions */
  .modal-enter-active,
  .modal-leave-active {
    @apply transition-opacity duration-300;
  }

  .modal-enter-from,
  .modal-leave-to {
    @apply opacity-0;
  }

  .modal-enter-active .modal-content,
  .modal-leave-active .modal-content {
    @apply transition-transform duration-300;
  }

  .modal-enter-from .modal-content,
  .modal-leave-to .modal-content {
    @apply scale-90;
  }
}

/* ============================================
   Utility Classes
   ============================================ */
@layer utilities {
  .text-center {
    @apply text-center;
  }

  .text-error {
    @apply text-red-600 dark:text-red-400;
  }

  .text-success {
    @apply text-green-600 dark:text-green-400;
  }

  .text-light {
    @apply text-gray-500 dark:text-gray-400;
  }

  /* Responsive toast */
  @media (max-width: 500px) {
    .toast {
      @apply left-4 right-4 min-w-0;
    }
  }

  /* Small screen refinements */
  @media (max-width: 480px) {
    .book-card {
      @apply p-3;
    }

    .modal-content,
    .qrcode-modal {
      @apply m-2;
    }

    .btn {
      @apply px-4 py-2 text-[0.8125rem];
    }

    .qrcode-container {
      @apply min-h-[240px];
    }
  }
}
